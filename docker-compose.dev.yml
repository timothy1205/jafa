version: "3.4"

services:
  jafa-backend:
    volumes:
      - "./backend:/opt/jafa/backend:ro"
    ports:
      - 8080:8080
    command:
      [
        "gunicorn",
        "--bind",
        "0.0.0.0:8080",
        "--worker-class", "gevent",
        "backend.app:create_app()",
        "--reload",
      ]
  jafa-frontend:
    volumes:
      - "./frontend:/app"
    build:
      target: build
  mongo:
    ports:
      - 27017:27017
